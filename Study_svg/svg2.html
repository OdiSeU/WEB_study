<html>
	<head>
		<style>
			svg {
				border : 1px solid #D00;
				position: absolute;
				left : 40px;
			}
		</style>
	</head>
	<body>
		<p id='mx'>mx : 0</p>
		<p id='my'>my : 0</p>
		<p id='vb'>x : 0, y : 0, width : 500, height : 500</p>
		<svg id='box' width='500' height ='500' viewbox='0 0 500 500' >
			<circle cx='250' cy='250' r='20'/>
			<circle cx='50' cy='250' r='20'/>
			<circle cx='300' cy='400' r='20'/>
		</svg>
	</body>
	<script>
		const box = document.querySelector('#box');

		box.setViewBox = function(rect) {
			this.viewBox.baseVal.x = rect.x;
			this.viewBox.baseVal.y = rect.y;
			this.viewBox.baseVal.width = rect.width;
			this.viewBox.baseVal.height = rect.height;
		}

		box.getViewBox = function() {
			return {
				x : this.viewBox.baseVal.x,
				y : this.viewBox.baseVal.y,
				width : this.viewBox.baseVal.width,
				height : this.viewBox.baseVal.height
			};
		}
		box.onmousemove = function(e) {
			let mx = document.querySelector('#mx');
			let my = document.querySelector('#my');
			mx.innerText = "mx : " + e.offsetX;
			my.innerText = "my : " + e.offsetY;
		}

		box.onmousewheel = function(e) {
			//console.log(e);
			let vb = this.getViewBox();
			let xRatio = e.offsetX / vb.width;
			let yRatio = e.offsetY / vb.height;

			if(e.deltaY > 0) { // zoom-out
				vb.width += 100;
				vb.height += 100;
			} else { //zoom-in
				vb.width -= 100;
				vb.height -= 100;
			}
			vb.x = vb.x + e.offsetX - vb.width * xRatio;
			vb.y = vb.y + e.offsetY - vb.height * yRatio;

			this.setViewBox(vb);
			document.querySelector('#vb').innerText = `x : ${vb.x}, y : ${vb.y}, width : ${vb.width}, height : ${vb.height}`;
		}
	</script>
</html>
